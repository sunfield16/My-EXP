---
create_date: 2025-11-14
modificate_date: 2025-11-14
---
一般的によく使われる画像のブレンド方法。  
前景（src）のアルファ値が低い箇所が透けて、背景（dst）の色が出てくるといった形になる。

## 計算方法
srcのアルファ値を変数にした[[線形補間]]を行う。
```
sRGB = srcのRGB
dRGB = dstのRGB
sA = srcのアルファ値
dA = dstのアルファ値

outRGB = sRGB * sA + dRGB * (1 - sA)
outAlpha = sA + dA * (1 - sA)
```

```
例:
srcのRGBA = (255, 0, 0, 0.5)
dstのRGBA = (0, 0, 255, 1)
の場合

outRGB = (255, 0, 0) * 0.5 + (0, 0, 255) * (1 - 0.5)
       = (127, 0, 0) + (0, 0, 127)
       = (127, 0, 127)
outAlpha = 0.5 + (1 - 0.5)
         = 1

outRGBA = (127, 0, 127, 1)
※前景の赤が半分透けて背景の青に混ざり、紫になった
```

```
例2:
srcRGBA = (255, 0, 0, 1)
dstRGBA = (0, 0, 255, 1)
の場合

outRGB = (255, 0, 0) * 1 + (0, 0, 255) * (1 - 1)
       = (255, 0, 0) + (0, 0, 0)
       = (255, 0, 0)
outAlpha = 1 + 1 - 1
         = 1
※前景の赤のアルファ値が 1 で透けないため、最終的に赤がそのまま描画される
```

## 乗算済みアルファ
前景の画像にアルファ値をあらかじめ掛けておくことで  
アルファブレンドの時に計算量を減らす技術。

先程の例では下記のようになる。

```
例:
srcRGBA = (255, 0, 0, 0.5)
↓ 先にアルファ値を掛ける
srcRGBA = (127, 0, 0, 0.5)

dstRGBA = (0, 0, 255, 1)
↓ 先にアルファ値を掛ける
dstRGBA = (0, 0, 255, 1)

outRGB = (127, 0, 0) + (0, 0, 255) * (1 - 0.5)
       = (127, 0, 0) + (0, 0, 127)
       = (127, 0, 127)
```